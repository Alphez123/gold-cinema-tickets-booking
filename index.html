<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gold Cinema - Home</title>
  <link rel="stylesheet" href="home-page.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

</head>
<body>
  <canvas id="background"></canvas>

  <!-- ðŸ§­ Navbar -->
  <nav>
    <div class="logo">ðŸŽ¬ Gold Cinema</div>
  
  <ul>
        <li class="notification-item">
            <button id="notificationBtn" class="nav-icon-btn">
                <i class="fas fa-bell"></i>
                <span id="notificationCount" class="badge">0</span>
            </button>
            <div id="notificationDropdown" class="dropdown-content">
                <p class="dropdown-header">Notifications</p>
                <div id="notificationList">
                    <p class="empty-message">No new notifications.</p>
                </div>
            </div>
        </li>
        </ul></nav>

  <!-- ðŸŽ¥ Hero Section -->
  <section id="hero" class="hero">
    <h1>Welcome to Gold Cinema Ticket Booking</h1>
    <p>Experience movies, plays, and concerts like never before â€” luxury, sound, and the magic of the big screen.</p>
    <button class="button" onclick="window.location.href='login.html'">Login or Register</button>


  <footer>
    Â© 2025 Gold Cinema. All rights reserved.
  </footer>

  <!-- âœ… Always load JS at the bottom so the button exists before JS runs -->
<script>
Â  Â  // Wait for the page to fully load before running
document.addEventListener("DOMContentLoaded", () => {
Â  // --- 1. Login/Registration Button Logic ---
Â  const loginButton = document.querySelector(".hero button"); // Select the button in the hero section

Â  if (!loginButton) {
Â  Â  console.error("Login button not found!");
Â  } else {
Â  Â  // Check login status (Note: Your original HTML uses an onclick attribute, 
Â  Â  // so this JS event listener might not be necessary unless you want more complex login logic.)
Â  Â  loginButton.addEventListener("click", () => {
Â  Â  Â  const isLoggedIn = localStorage.getItem("isLoggedIn") === "true";
Â  Â  Â  if (isLoggedIn) {
Â  Â  Â  Â  window.location.href = "home.html";
Â  Â  Â  } else {
Â  Â  Â  Â  window.location.href = "login.html";
Â  Â  Â  }
Â  Â  });
Â  }


Â  // =======================================================
Â  // ðŸ”” NEW: NOTIFICATION LOGIC (REQUIRED FOR FUNCTIONALITY)
Â  // =======================================================
Â  const notificationBtn = document.getElementById('notificationBtn');
Â  const notificationDropdown = document.getElementById('notificationDropdown');
Â  const notificationCount = document.getElementById('notificationCount');
Â  const notificationList = document.getElementById('notificationList');
Â  
Â  let notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
Â  let unreadCount = notifications.filter(n => n.read === false).length;

Â  // Function to render the notifications and update the badge
Â  const updateNotificationsUI = () => {
Â  Â  unreadCount = notifications.filter(n => n.read === false).length;
Â  Â  notificationCount.textContent = unreadCount;
Â  Â  notificationCount.style.display = unreadCount > 0 ? 'inline-block' : 'none';

Â  Â  if (notifications.length === 0) {
Â  Â  Â  notificationList.innerHTML = '<p class="empty-message">No new notifications.</p>';
Â  Â  Â  return;
Â  Â  }

Â  Â  // Build the list content
Â  Â  notificationList.innerHTML = '';
Â  Â  notifications.forEach((notification, index) => {
Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  item.className = `notification-item-content ${!notification.read ? 'unread' : 'read'}`;
Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  <span class="notification-text">${notification.message}</span>
Â  Â  Â  Â  <button class="archive-btn" data-index="${index}" ${notification.read ? '' : 'disabled'}>Archive</button>
Â  Â  Â  `;
Â  Â  Â  notificationList.appendChild(item);
Â  Â  });
Â  Â  localStorage.setItem('notifications', JSON.stringify(notifications));
Â  };

Â  // Toggles the dropdown menu visibility
Â  notificationBtn.addEventListener('click', () => {
Â  notificationDropdown.classList.toggle('show');

Â  Â  // Mark all as read when dropdown is opened
Â  Â  notifications = notifications.map(n => ({ ...n, read: true }));
Â  Â  localStorage.setItem('notifications', JSON.stringify(notifications));
Â  Â  updateNotificationsUI(); 
Â  });

Â  // Handle archive button clicks within the dropdown
Â  notificationList.addEventListener('click', (e) => {
Â  Â  if (e.target.classList.contains('archive-btn')) {
Â  Â  Â  const index = parseInt(e.target.getAttribute('data-index'));
Â  Â  Â  
Â  Â  Â  // Simple remove: filter out the notification at the specified index
Â  Â  Â  notifications = notifications.filter((_, i) => i !== index);
Â  Â  Â  updateNotificationsUI();
Â  Â  }
Â  });
Â  
Â  // Initial UI render
Â  updateNotificationsUI();


Â  // =======================================================
Â  // ðŸ’¬ CHATBOT LOGIC (Your existing code)
Â  // =======================================================
Â  Â  const chatTab = document.getElementById('chatTab');
Â  Â  const chatWindow = document.getElementById('chatWindow');
Â  Â  const closeChatBtn = document.getElementById('closeChatBtn');
Â  Â  const chatBody = document.getElementById('chatBody');
Â  Â  const chatInput = document.getElementById('chatInput');
Â  Â  const chatSendBtn = document.getElementById('chatSendBtn');
Â  Â  
Â  Â  // ... (rest of your existing chatbot logic) ...
Â  Â  
Â  Â  const toggleChatWindow = () => {
Â  Â  Â  Â  // Adds or removes the 'visible' class to show/hide the window
Â  Â  Â  Â  chatWindow.classList.toggle('visible');
Â  Â  Â  Â  
Â  Â  Â  Â  if (chatWindow.classList.contains('visible')) {
Â  Â  Â  Â  Â  Â  chatInput.focus();
Â  Â  Â  Â  }
Â  Â  };

Â  Â  // Attach the toggle function to the floating icon and the close button
Â  Â  chatTab.addEventListener('click', toggleChatWindow);
Â  Â  closeChatBtn.addEventListener('click', toggleChatWindow);

Â  Â  
Â  Â  // --- 2. Chat Functionality (Fixed Response Logic) ---
Â  Â  const createMessageElement = (message, type) => {
Â  Â  Â  Â  const msgDiv = document.createElement('div');
Â  Â  Â  Â  msgDiv.className = `chat-message ${type}-message`;
Â  Â  Â  Â  msgDiv.textContent = message;
Â  Â  Â  Â  chatBody.appendChild(msgDiv);
Â  Â  Â  Â  chatBody.scrollTop = chatBody.scrollHeight;
Â  Â  };
Â  Â  
Â  Â  const handleUserInput = () => {
Â  Â  Â  Â  const userText = chatInput.value.trim();
Â  Â  Â  Â  if (userText === '') return;

Â  Â  Â  Â  createMessageElement(userText, 'user');

Â  Â  Â  Â  chatInput.value = '';

Â  Â  Â  Â  // Generate fixed bot response after a short delay
Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  const botResponse = "Contact 0712345678 for more info.";
Â  Â  Â  Â  Â  Â  createMessageElement(botResponse, 'bot');
Â  Â  Â  Â  }, 500);
Â  Â  };

Â  Â  // Send button click and Enter key press listeners
Â  Â  chatSendBtn.addEventListener('click', handleUserInput);
Â  Â  chatInput.addEventListener('keypress', (e) => {
Â  Â  Â  Â  if (e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  handleUserInput();
Â  Â  Â  Â  }
Â  Â  });
});
Â  </script>
  
<div class="chatbot-container">
    <button id="chatTab" class="chat-tab-btn" title="Advisor Support">
        <i class="fas fa-comment-dots"></i>
    </button>
    
    <div id="chatWindow" class="chat-window">
        <div class="chat-header">
            <h3>Advisor Support</h3>
            <button id="closeChatBtn"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-message bot-message">
                How may I help you?
            </div>
        </div>
        <div class="chat-footer">
            <input type="text" id="chatInput" placeholder="Type a message..." />
            <button id="chatSendBtn"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>
</body>
</html>